import{_ as P}from"./nuxt-link.43090cd8.js";import{f as k,r,y as V,A as w,g as j,n as C,o as m,c as d,a as t,b as $,w as D,k as S,l as M,i as h,s as F,C as U,d as T,j as A,v as B,F as R,m as I,t as q,z as K,D as v,h as y,B as z,E}from"./entry.8f2a51df.js";import{u as L}from"./vue.f36acd1f.1a9efbf7.js";const O=""+new URL("user-circle.b7d7e5ba.svg",import.meta.url).href,H=""+new URL("user.00a75a3c.svg",import.meta.url).href,J=""+new URL("settings.8351913c.svg",import.meta.url).href,W=""+new URL("arrow-out.0451ae6b.svg",import.meta.url).href,G={class:"navbar"},Q={class:"navbar-elements"},X=t("img",{alt:"Logo",class:"logo"},null,-1),Y={class:"right-side"},Z=["onKeyup"],ee={key:0,class:"dropdown"},te=t("a",{href:"#",class:"dropdown-content"},[t("img",{src:H,alt:""}),T(" Profile ")],-1),se=t("a",{href:"#",class:"dropdown-content"},[t("img",{src:J,alt:""}),T(" Settings ")],-1),oe=t("img",{src:W,alt:""},null,-1),ae=k({__name:"PageNav",setup(b){const l=r(),n=r({}),c=r(!1),s=r(""),o=r(!1),e=V(),a=w("themeFileName");L(()=>({link:[{rel:"stylesheet",href:`/themes/${a}.css`}]})),j(()=>{p()});function i(){e.push(`/search/${s.value}`)}async function p(){const N=C.get("access_token"),u=`
            query {
                Viewer {
                    name
                    avatar {
                        large
                    }
                }
            }
        `,g={},_=await fetch("https://graphql.anilist.co",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify({query:u,variables:g})});if(_.status===200){const f=await _.json();console.log(f),n.value=f.data.Viewer,l.value.src=f.data.Viewer.avatar.large,c.value=!0}}const x=()=>{C.remove("access_token"),window.location.reload()};return(N,u)=>{const g=P;return m(),d("nav",G,[t("div",Q,[$(g,{to:"/",class:"logo"},{default:D(()=>[X]),_:1}),t("div",Y,[S(t("input",{type:"search",placeholder:"Search",class:"search-bar","onUpdate:modelValue":u[0]||(u[0]=_=>F(s)?s.value=_:null),onKeyup:U(i,["enter"])},null,40,Z),[[M,h(s)]]),t("div",{class:"account-icon-container",onMouseover:u[1]||(u[1]=_=>o.value=!0),onMouseleave:u[2]||(u[2]=_=>o.value=!1)},[t("img",{ref_key:"usericon",ref:l,src:O,alt:"Account",class:"account-icon",width:"32",height:"32"},null,512),h(c)&&h(o)?(m(),d("div",ee,[te,se,t("a",{onClick:x,class:"dropdown-content"},[oe,T(" Logout ")])])):A("",!0)],32)])])])}}});const ne={class:"footer"},ce={class:"theme-selector"},re=["value"],le=t("p",null," We are not responsible for the content on this website. All rights belong to anilist and malsync. ",-1),ie=k({__name:"PageFooter",setup(b){const l=w("themes"),n=w("selectedTheme"),c=()=>{localStorage.setItem("theme",n.value)};return(s,o)=>(m(),d("footer",ne,[t("div",ce,[S(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>F(n)?n.value=e:null),onChange:c},[(m(!0),d(R,null,I(h(l),(e,a)=>(m(),d("option",{value:a,key:a},q(e.name),9,re))),128))],544),[[B,h(n)]]),t("button",{onClick:o[1]||(o[1]=e=>("navigateTo"in s?s.navigateTo:h(K))("/themes"))},"Manage Themes")]),le]))}});const ue={class:"page"},_e={class:"page-content"},ve=k({__name:"default",setup(b){const l=r("0");v("selectedTheme",l);const n=r("default");v("themeFileName",n),y(l,(e,a)=>{if(e!==a){const i=parseInt(e);console.warn("themeLocation",i,s.value[i]),s.value[i]!==void 0&&(n.value=s.value[i].id)}});const c=r("1"),s=r({});y(c,(e,a)=>{e!==a&&o()}),y(s,(e,a)=>{e!==a&&(l.value=localStorage.getItem("theme")||"0")}),v("themes",s),v("themeDomain",c),L(()=>({link:[{rel:"stylesheet",href:`${c.value}/themes/${n.value}.css`}]})),z(()=>{c.value=localStorage.getItem("themeDomain")||"",o()});const o=async()=>{fetch(`${c.value}/themes.json`).then(e=>e.json()).then(e=>s.value=e).catch(e=>console.error(e))};return(e,a)=>{const i=ae,p=ie;return m(),d("div",ue,[$(i),t("div",_e,[E(e.$slots,"default")]),$(p)])}}});export{ve as default};
