import{_ as P}from"./BsHpI5Ki.js";import{n as M,N as w,r,L as E,q as V,B as H,o as v,c as m,a as t,b as x,w as C,x as z,z as I,s as d,E as A,O,d as S,v as q,h as B,y as F,F as L,A as N,t as R,M as U,P as b,I as J,j as K,J as Q,Q as D,R as W}from"./HWOIP6YO.js";const G="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M5.52%2019c.64-2.2%201.84-3%203.22-3h6.52c1.38%200%202.58.8%203.22%203'/%3e%3ccircle%20cx='12'%20cy='10'%20r='3'/%3e%3ccircle%20cx='12'%20cy='12'%20r='10'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M20%2021v-2a4%204%200%200%200-4-4H8a4%204%200%200%200-4%204v2'%3e%3c/path%3e%3ccircle%20cx='12'%20cy='7'%20r='4'%3e%3c/circle%3e%3c/svg%3e",Y="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3ccircle%20cx='12'%20cy='12'%20r='3'%3e%3c/circle%3e%3cpath%20d='M19.4%2015a1.65%201.65%200%200%200%20.33%201.82l.06.06a2%202%200%200%201%200%202.83%202%202%200%200%201-2.83%200l-.06-.06a1.65%201.65%200%200%200-1.82-.33%201.65%201.65%200%200%200-1%201.51V21a2%202%200%200%201-2%202%202%202%200%200%201-2-2v-.09A1.65%201.65%200%200%200%209%2019.4a1.65%201.65%200%200%200-1.82.33l-.06.06a2%202%200%200%201-2.83%200%202%202%200%200%201%200-2.83l.06-.06a1.65%201.65%200%200%200%20.33-1.82%201.65%201.65%200%200%200-1.51-1H3a2%202%200%200%201-2-2%202%202%200%200%201%202-2h.09A1.65%201.65%200%200%200%204.6%209a1.65%201.65%200%200%200-.33-1.82l-.06-.06a2%202%200%200%201%200-2.83%202%202%200%200%201%202.83%200l.06.06a1.65%201.65%200%200%200%201.82.33H9a1.65%201.65%200%200%200%201-1.51V3a2%202%200%200%201%202-2%202%202%200%200%201%202%202v.09a1.65%201.65%200%200%200%201%201.51%201.65%201.65%200%200%200%201.82-.33l.06-.06a2%202%200%200%201%202.83%200%202%202%200%200%201%200%202.83l-.06.06a1.65%201.65%200%200%200-.33%201.82V9a1.65%201.65%200%200%200%201.51%201H21a2%202%200%200%201%202%202%202%202%200%200%201-2%202h-.09a1.65%201.65%200%200%200-1.51%201z'%3e%3c/path%3e%3c/svg%3e",Z="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M10%203H6a2%202%200%200%200-2%202v14c0%201.1.9%202%202%202h4M16%2017l5-5-5-5M19.8%2012H9'/%3e%3c/svg%3e",ee={class:"navbar"},te={class:"navbar-elements"},se=["src"],oe={class:"right-side"},ne={key:0,class:"dropdown"},ae=t("img",{src:X,alt:""},null,-1),le=t("a",{href:"#",class:"dropdown-content"},[t("img",{src:Y,alt:""}),S(" Settings ")],-1),ce=t("img",{src:Z,alt:""},null,-1),re=M({__name:"PageNav",setup(j){const a=w("themes"),l=r(),s=r({}),g=r(!1),o=r(""),c=r(!1),i=E(),e=w("themeDomain"),n=w("selectedTheme");V(()=>{f()});function _(){i.push(`/search/${o.value}`)}async function f(){const u=H.get("access_token"),h=`
            query {
                Viewer {
                    name
                    avatar {
                        large
                    }
                }
            }
        `,y={},p=await fetch("https://graphql.anilist.co",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({query:h,variables:y})});if(p.status===200){const T=await p.json();console.log(T),s.value=T.data.Viewer,l.value.src=T.data.Viewer.avatar.large,g.value=!0}}const k=()=>{H.remove("access_token"),window.location.reload()},$=()=>{if(n.value.id==="default"||!a)return"/res/logo/default.png";for(const u of Object.values(a.value))if(u.id===n.value.id)return u.logo?`${e.value}/res/logo/${u.logo}.png`:"/res/logo/default.png"};return(u,h)=>{const y=P;return v(),m("nav",ee,[t("div",te,[x(y,{to:"/",class:"logo"},{default:C(()=>[t("img",{src:$(),class:"logo"},null,8,se)]),_:1}),t("div",oe,[z(t("input",{type:"search",placeholder:"Search",class:"search-bar","onUpdate:modelValue":h[0]||(h[0]=p=>A(o)?o.value=p:null),onKeyup:O(_,["enter"])},null,544),[[I,d(o)]]),t("div",{class:"account-icon-container",onMouseover:h[1]||(h[1]=p=>c.value=!0),onMouseleave:h[2]||(h[2]=p=>c.value=!1)},[t("img",{ref_key:"usericon",ref:l,src:G,alt:"Account",class:"account-icon",width:"32",height:"32"},null,512),d(g)&&d(c)?(v(),m("div",ne,[x(y,{to:"/profile",class:"dropdown-content"},{default:C(()=>[ae,S(" Profile ")]),_:1}),le,t("a",{onClick:k,class:"dropdown-content"},[ce,S(" Logout ")])])):q("",!0)],32)])])])}}}),ie={class:"footer"},de={class:"theme-selector"},ue=["value"],ge=t("p",null," We are not responsible for the content on this website. All rights belong to anilist and malsync. ",-1),he=M({__name:"PageFooter",setup(j){const a=w("themes"),l=w("selectedTheme"),s=r();B(l,(o,c)=>{s.value=o.id});const g=()=>{for(const o in a.value)a.value[o].id===s.value&&(l.value=a.value[o]);localStorage.setItem("theme",l.value.id)};return V(()=>{s.value=localStorage.getItem("theme")||"default"}),(o,c)=>(v(),m("footer",ie,[t("div",de,[z(t("select",{"onUpdate:modelValue":c[0]||(c[0]=i=>A(s)?s.value=i:null),onChange:g},[(v(!0),m(L,null,N(d(a),(i,e)=>(v(),m("option",{value:i.id,key:e},R(i.name),9,ue))),128))],544),[[F,d(s)]]),t("button",{onClick:c[1]||(c[1]=i=>("navigateTo"in o?o.navigateTo:d(U))("/themes"))},"Manage Themes")]),ge]))}}),ve=["src"],me={class:"page-content"},fe=M({__name:"default",setup(j){const a=r(null),l=r({id:"default"});b("selectedTheme",l);const s=r("");b("themeDomain",s);const g=r({});B(s,(e,n)=>{e!==n&&i()}),B(g,(e,n)=>{e!==n&&(l.value.id=localStorage.getItem("theme")||"default")}),b("themes",g),b("themeDomain",s),J(()=>{s.value=localStorage.getItem("themeDomain")||"",i()}),V(async()=>{const e=r(document.body),n=new ResizeObserver(_=>{for(let f of _)f.target===e.value&&c()});e.value&&n.observe(e.value),window.addEventListener("resize",c),K(()=>{window.removeEventListener("resize",c),e.value&&n.unobserve(e.value),n.disconnect()})});const o=Q(()=>{var e,n;return((e=l.value)==null?void 0:e.viginette)==="light"?{"--brightness":"1.5"}:((n=l.value)==null?void 0:n.viginette)==="none"?{"--brightness":"1"}:{"--brightness":"0.5"}}),c=()=>{const e=document.documentElement.scrollHeight>window.innerHeight;!e&&a.value?setTimeout(()=>{e===document.documentElement.scrollHeight>window.innerHeight&&a.value.classList.add("page-bg-single")},1e3):a.value&&a.value.classList.remove("page-bg-single")},i=async()=>{fetch(`${s.value}/themes.json`).then(e=>e.json()).then(e=>g.value=e).catch(e=>console.error(e))};return(e,n)=>{var k;const _=re,f=he;return v(),m("div",{class:"page",style:D(`background: ${((k=d(l))==null?void 0:k.id)=="default"?"#333":""}`)},[t("div",{class:"page-bg",ref_key:"pageBg",ref:a,style:D(d(o))},[(v(),m(L,null,N(9,$=>{var u;return t("div",{class:"page-bg-img",key:$},[t("img",{src:`${d(s)}/res/background/${(u=d(l))==null?void 0:u.id}.png`,alt:"Background"},null,8,ve)])}),64))],4),x(_),t("div",me,[W(e.$slots,"default")]),x(f)],4)}}});export{fe as default};
